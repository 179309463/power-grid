<!DOCTYPE html>
<html>
<head>
  <title>Shop Floor Monitor</title>
  <meta name="description" content="A state monitoring diagram." />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
    <script src="https://cdn.pubnub.com/pubnub-3.7.18.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <script src="go.js"></script>
  <body>

    <div id="myDiagramDiv" style="width:100%; height:500px; background-color: #EFE8F7;"></div>
    <div data-role="popup" id="popup" style="width:75%; height:400px; background-color:#b1adac; display: none;">
      <div id="popupdata"> <p>ofdjdrmmsidc<br>seferfergergr</p></div>
    </div>
    <script id="code">
        var $ = go.GraphObject.make;

        var myDiagram =
          $(go.Diagram, "myDiagramDiv",
            {
              initialContentAlignment: go.Spot.Center, 
              "animationManager.isEnabled": false,
              "undoManager.isEnabled": true, 
            });

        myDiagram.nodeTemplate =
          $(go.Node, "Horizontal",
            { background: "#DD9D98",locationObjectName: "ICON" },
            new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify),
            $(go.Picture,
              { margin: 10, width: 50, height: 50},
              new go.Binding("source")
              ),
            $(go.TextBlock, "Default Text",
              { margin: 12, stroke: "black", font: "bold 16px sans-serif" },
             new go.Binding("text", "name"))            
          );

        
        // myDiagram.addDiagramListener("ObjectDoubleClicked",function popup(){
        //   $("#popupopen").popup('open', {
        //             transition: 'pop'
        //   });
        //   var model = myDiagram.model
        //   model.nodeDataArray1 =
        //   [
        //     { key: "6",name:"fan1",source:"images/fan.jpeg","loc":"-70 50"},
        //     { key: "7",name:"bulb1",source:"images/bulb.jpg","loc":"-70 50"},
        //     { key: "8",name:"fan2",source:"images/fan.jpeg","loc":"-70 50"},
        //     { key: "9",name:"bulb2",source:"images/bulb.jpg","loc":"-70 250"}  
        //   ];
        //   model.linkDataArray1 = 
        //   [
        //       {from:"6", to:"7"},
        //       {from:"7", to:"8"},
        //       {from:"8", to:"9"}
        //   ]
        // })
       
     
        var model = myDiagram.model
        model.nodeDataArray =
        [
          { key: "1",name: "solarPanel",source: "images/Optimized-solarpanel.jpg","loc":"-500 -200" },
          { key: "2",name: "sensor1",source: "images/Optimized-ammeter.jpg", "loc":"-170 -200" },
          { key: "3", name: "home",source: "images/Optimized-home.jpg", "loc":"170 150" },
          { key: "4",name: "sensor2", source: "images/Optimized-ammeter.jpg", "loc":"-170 -70"},
          { key: "5",name: "grid", source: "images/Optimized-bat.jpg", "loc":"105 -200" }
        ];
        model.linkDataArray = 
        [
            {from:"1", to:"2"},
            {from:"2", to:"4"},
            {from:"2", to:"5"},
            {from:"4", to:"3"}
        ]
         model.nodeDataArray =
          [
            { key: "6",name:"fan1",source:"images/fan.jpeg","loc":"-70 50"},
            { key: "7",name:"bulb1",source:"images/bulb.jpg","loc":"-70 50"},
            { key: "8",name:"fan2",source:"images/fan.jpeg","loc":"-70 50"},
            { key: "9",name:"bulb2",source:"images/bulb.jpg","loc":"-70 250"}  
          ];
          model.linkDataArray = 
          [
              {from:"6", to:"7"},
              {from:"7", to:"8"},
              {from:"8", to:"9"}
          ]
    </script>  
</body>
</html>